<!DOCTYPE html> 
<html lang="zh-CN"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>医生详情 - BJTU</title> 
    <link rel="stylesheet" href="src/style.css">
    <style>
        /* 通用重置 */
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5; /* 略微灰色背景 */
            color: #333;
            font-size: 14px;
        }
        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        a {
            text-decoration: none;
            color: inherit;
        }
        
        /* 页面容器 */
        .page-container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            box-sizing: border-box;
        }
        
        /* 通用悬停动画效果 */
        .hover-effect:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1) !important;
        }
        
        /* 过渡动画 */
        .transition-all {
            transition: all 0.3s ease-in-out;
        }
        /* 1. 顶部区域样式 */
        .top-bar-container {
            padding: 15px 0;
            background-color: #fff;
            border-bottom: 1px solid #eee;
        }
        
        .top-bar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* Logo 和 城市选择 */
        .logo-area {
            display: flex;
            align-items: baseline;
        }
        .logo-text {
            font-size: 28px;
            font-weight: bold;
            color: #00a0e9; /* 蓝色 */
            margin-right: 15px;
        }
        .slogan-text {
            font-size: 12px;
            color: #666;
            border-left: 1px solid #ccc;
            padding-left: 15px;
            margin-right: 30px;
        }
        
        /* 搜索区域 */
        .search-area {
            display: flex;
            border: 2px solid #00a0e9; /* 蓝色边框 */
            border-radius: 4px;
            overflow: hidden;
            width: 100%;
            max-width: 500px;
        }
        .search-input {
            padding: 12px 15px;
            border: none;
            width: 100%;
            font-size: 16px;
            outline: none;
        }
        .search-button {
            background-color: #00a0e9; /* 蓝色背景 */
            color: #fff;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            font-size: 16px;
            font-size: 14px;
        }
        
        /* 2. 主导航栏样式 */
        .main-nav-container {
            background-color: #0072c6; /* 深蓝色背景 */
            height: 42px;
        }
        
        .main-nav-list {
            display: flex;
            align-items: center;
            height: 100%;
        }
        .main-nav-list li a {
            color: #fff;
            padding: 0 20px;
            line-height: 42px;
            font-size: 16px;
            display: block;
            transition: background-color 0.3s;
            cursor: pointer;
            font-weight: bold;
        }
        .main-nav-list li a:hover,
        .main-nav-list li a.active {
            background-color: #005ba1; /* 鼠标悬停或选中时的深色背景 */
        }
        
        /* 医生详情页样式 */
        .doctor-detail-container {
            padding: 20px 0;
        }
        
        /* 面包屑导航 */
        .breadcrumb {
            font-size: 12px;
            color: #999;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        .breadcrumb a {
            color: #00a0e9;
        }
        
        /* 医生信息卡片 */
        .doctor-info-card {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            margin-bottom: 40px;
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        .doctor-photo {
            width: 160px;
            height: 160px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 20px;
            border: 1px solid #eee;
        }
        
        .doctor-info-main {
            flex-grow: 1;
        }
        
        .doctor-name {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-right: 10px;
        }
        
        .doctor-title {
            font-size: 14px;
            color: #00a0e9;
            margin-right: 15px;
        }
        
        .follow-btn {
            background-color: #00a0e9;
            color: #fff;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .hospital-dept {
            color: #666;
            font-size: 14px;
            margin: 10px 0;
        }
        
        .doctor-stats {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .stat-item {
            font-size: 14px;
            color: #666;
        }
        
        .stat-item strong {
            color: #ff6600;
            font-weight: bold;
        }
        
        .stat-item .stat-count {
            color: #333;
        }
        
        /* 功能导航样式已移除 */
        
        /* 主内容区 */
        .content-wrapper {
            display: flex;
            gap: 40px;
        }
        
        /* 左侧内容 */
        .main-content {
            flex: 1;
            min-width: 0;
            padding: 10px;
        }
        
        /* 右侧边栏 */
        .right-sidebar {
            width: 350px;
            flex-shrink: 0;
        }
        
        /* 模块通用样式 */
        .module {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            margin-bottom: 30px;
            overflow: hidden;
            padding: 25px;
        }
        
        .module-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin: 0 0 20px 0;
            padding: 0;
            border-bottom: none;
        }
        
        /* 子导航 */
        .sub-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .sub-nav-item {
            padding: 5px 15px;
            background-color: #f5f5f5;
            border-radius: 15px;
            font-size: 14px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .sub-nav-item:hover,
        .sub-nav-item.active {
            background-color: #00a0e9;
            color: #fff;
        }
        
        /* 排班表 */
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .schedule-table th,
        .schedule-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #eee;
        }
        
        .schedule-table th {
            background-color: #f7f7f7;
            font-weight: bold;
            color: #333;
        }
        
        .schedule-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .schedule-time {
            background-color: #f7f7f7;
            font-weight: bold;
        }
        
        .booking-available {
            background-color: #5cb85c;
            color: #fff;
            cursor: pointer;
            font-weight: bold;
        }
        
        .booking-unavailable {
            color: #999;
        }
        
        /* 评价卡片 */
        .review-card {
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .review-card:last-child {
            border-bottom: none;
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .reviewer-info {
            font-size: 14px;
            color: #666;
        }
        
        .review-time {
            font-size: 12px;
            color: #999;
        }
        
        .review-content {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- 顶部区域 -->
    <div class="top-bar-container">
        <div class="page-container">
            <div class="top-bar-content">
                <div class="logo-area">
                    <span class="logo-text">BJTU</span>
                    <span class="slogan-text">专业医疗预约挂号平台</span>
                </div>
                
                <div class="search-area">
                    <input type="text" class="search-input" placeholder="搜索医生、医院、科室">
                    <button class="search-button">搜索</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 主导航栏 -->
    <div class="main-nav-container">
        <div class="page-container">
            <ul class="main-nav-list">
                <li><a href="index.html">首页</a></li>
                <li><a href="guahao.html">预约挂号</a></li>
                <li><a href="doctor.html">医生主页</a></li>
            </ul>
        </div>
    </div>
    
    <!-- 医生详情内容 -->
    <div class="page-container doctor-detail-container">
        <!-- 面包屑导航 -->
        <div class="breadcrumb">
            <a href="index.html">首页</a> &gt; 
            <a href="guahao.html">预约挂号</a> &gt; 
            <span>医生详情</span>
        </div>
        
        <!-- 医生信息卡片 -->
        <div class="doctor-info-card hover-effect transition-all">
            <img src="path/to/dr_image_chu.jpg" alt="储真真" class="doctor-photo">
            
            <div class="doctor-info-main">
                <div style="display: flex; align-items: center; flex-wrap: wrap;">
                    <span class="doctor-name">储真真</span>
                    <span class="doctor-title">主任医师</span>
                    <button class="follow-btn">+ 关注</button>
                </div>
                
                <div class="hospital-dept">
                    第一批从业北京 | 北京交通大学校医院
                </div>
                
                <div class="doctor-stats">
                    <span class="stat-item">已开通：挂号</span>
                    <span class="stat-item">评分：<strong>10.0</strong></span>
                    <span class="stat-item">预约量：<strong class="stat-count">135</strong></span>
                    <span class="stat-item">粉丝量：<strong class="stat-count">121</strong></span>
                </div>
            </div>
        </div>
        
        <!-- 功能导航已移除，默认只显示医生主页内容 -->
        
        <!-- 主内容区 -->
        <div class="content-wrapper">
            <!-- 左侧内容 -->
            <div class="main-content">
                <!-- 医生排班模块 -->
                <div class="module">
                    <h2 class="module-title">医生排班</h2>
                    
                    <div class="sub-nav">
                        <span class="sub-nav-item active">医生擅长</span>
                        <span class="sub-nav-item">医生简介</span>
                        <span class="sub-nav-item">医生动态</span>
                    </div>
                    
                    <div style="overflow-x: auto; margin-bottom: 15px;">
                        <table class="schedule-table">
                            <thead>
                                <tr>
                                    <th width="100">时段</th>
                                    <th>10/30<br>周四</th>
                                    <th>10/31<br>周五</th>
                                    <th>11/01<br>周六</th>
                                    <th>11/02<br>周日</th>
                                    <th>11/03<br>周一</th>
                                    <th>11/04<br>周二</th>
                                    <th>11/05<br>周三</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="schedule-time">上午</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                </tr>
                                <tr>
                                    <td class="schedule-time">下午</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-available">可约</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                </tr>
                                <tr>
                                    <td class="schedule-time">晚上</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                    <td class="booking-unavailable">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 10px; text-align: center; color: #ff6600; font-size: 14px;">
                        医院：北京中医药大学东方国际部 | 科室：国际部血液肿瘤科一区
                    </div>
                </div>
                
                <!-- 患者评价模块 -->
                <div class="module">
                    <h2 class="module-title">患者评价 (2)</h2>
                    
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer-info">患者：李先生</div>
                            <div class="review-time">2023-10-28</div>
                        </div>
                        <div class="review-content">
                            医态很好，解释得很详细，很有耐心地解答了我所有的问题。治疗方案也很有效。
                        </div>
                    </div>
                    
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer-info">患者：王女士</div>
                            <div class="review-time">2023-10-25</div>
                        </div>
                        <div class="review-content">
                            储医生经验丰富，诊断准确，给出的建议很实用。医院环境也很好，预约流程简单方便。
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 右侧边栏 -->
            <div class="right-sidebar">
                <!-- 医院信息 -->
                <div class="module">
                    <h2 class="module-title">医院信息</h2>
                    <div style="padding: 10px 0;">
                        <div style="font-weight: bold; margin-bottom: 10px;">北京交通大学校医院</div>
                        <div style="color: #666; font-size: 13px; line-height: 1.6;">
                            地址：北京市海淀区西直门外上园村3号北京交通大学<br>
                            电话：010-51688120<br>
                            等级：校医院
                        </div>
                    </div>
                </div>
                
                <!-- 相关医生推荐 -->
                <div class="module">
                    <h2 class="module-title">相关医生推荐</h2>
                    <div style="padding: 10px 0;" id="recommended-doctors">
                        <!-- 推荐医生列表会通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>
        </div>
    </div>
<script>
        // 模拟医生数据
        const doctors = [
            {
                id: '1',
                name: '王医生',
                title: '主任医师',
                hospital: '北京交通大学校医院',
                location: '第一批从业北京',
                rating: '10.0',
                appointments: '135',
                followers: '121',
                photo: 'https://picsum.photos/id/237/200/200',
                department: '内科',
                reviews: [
                    {
                        name: '李先生',
                        date: '2023-10-28',
                        content: '医态很好，解释得很详细，很有耐心地解答了我所有的问题。治疗方案也很有效。'
                    },
                    {
                        name: '王女士',
                        date: '2023-10-25',
                        content: '储医生经验丰富，诊断准确，给出的建议很实用。医院环境也很好，预约流程简单方便。'
                    }
                ]
            },
            {
                id: '2',
                name: '李医生',
                title: '主治医师',
                hospital: '北京交通大学校医院',
                location: '从业经验10年',
                rating: '9.8',
                appointments: '98',
                followers: '85',
                photo: 'https://picsum.photos/id/238/200/200',
                department: '内科',
                reviews: [
                    {
                        name: '张先生',
                        date: '2023-10-26',
                        content: '李医生认真负责，对待病人很耐心，治疗方案很有效。'
                    }
                ]
            },
            {
                id: '3',
                name: '刘医生',
                title: '副主任医师',
                hospital: '北京交通大学校医院',
                location: '从业经验15年',
                rating: '9.9',
                appointments: '210',
                followers: '156',
                photo: 'https://picsum.photos/id/239/200/200',
                department: '内科',
                reviews: [
                    {
                        name: '赵女士',
                        date: '2023-10-27',
                        content: '刘医生专业水平很高，诊断准确，推荐给大家。'
                    }
                ]
            },
            {
                id: '4',
                name: '张医生',
                title: '副主任医师',
                hospital: '北京交通大学校医院',
                location: '从业经验12年',
                rating: '9.7',
                appointments: '156',
                followers: '132',
                photo: 'https://picsum.photos/id/240/200/200',
                department: '内科',
                reviews: [
                    {
                        name: '王先生',
                        date: '2023-10-24',
                        content: '张医生服务态度很好，医疗技术也很棒。'
                    }
                ]
            }
        ];
        
        // 从URL获取医生名称或ID
        function getDoctorFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const doctorParam = urlParams.get('doctor');
            const idParam = urlParams.get('id');
            console.log('URL参数 - doctor:', doctorParam);
            console.log('URL参数 - id:', idParam);
            return doctorParam || idParam;
        }
        
        // 根据医生名称或ID查找医生信息
        function findDoctorByNameOrId(nameOrId) {
            console.log('查找医生:', nameOrId);
            
            if (!nameOrId) {
                console.log('未提供医生参数，返回默认医生');
                return doctors[0];
            }
            
            // 先尝试精确匹配ID
            let doctor = doctors.find(doc => doc.id === nameOrId);
            if (doctor) {
                console.log('按ID找到医生:', doctor.name);
                return doctor;
            }
            
            // 尝试精确匹配名称
            doctor = doctors.find(doc => doc.name === nameOrId);
            if (doctor) {
                console.log('按名称精确匹配找到医生:', doctor.name);
                return doctor;
            }
            
            // 再尝试模糊匹配名称（忽略大小写）
            doctor = doctors.find(doc => 
                doc.name.toLowerCase().includes(nameOrId.toLowerCase())
            );
            if (doctor) {
                console.log('按名称模糊匹配找到医生:', doctor.name);
                return doctor;
            }
            
            // 如果找不到，返回默认医生（第一个）
            console.log('未找到匹配的医生，返回默认医生');
            return doctors[0];
        }
        
        // 更新医生信息到页面
        function updateDoctorInfo(doctor) {
            console.log('更新医生信息:', doctor.name);
            
            try {
                // 更新医生信息卡片
                document.querySelector('.doctor-photo').src = doctor.photo;
                document.querySelector('.doctor-photo').alt = doctor.name;
                document.querySelector('.doctor-name').textContent = doctor.name;
                document.querySelector('.doctor-title').textContent = doctor.title;
                document.querySelector('.hospital-dept').textContent = 
                    doctor.location + ' | ' + doctor.hospital;
                document.querySelector('.doctor-stats .stat-item:nth-child(2) strong').textContent = doctor.rating;
                document.querySelector('.doctor-stats .stat-item:nth-child(3) strong').textContent = doctor.appointments;
                document.querySelector('.doctor-stats .stat-item:nth-child(4) strong').textContent = doctor.followers;
                
                // 更新医院信息
                const hospitalInfoEl = document.querySelector('.right-sidebar .module:first-child div:first-of-type');
                if (hospitalInfoEl) {
                    hospitalInfoEl.textContent = doctor.hospital;
                }
                
                // 更新科室信息
                const departmentEl = document.querySelector('.schedule-table + div');
                if (departmentEl) {
                    departmentEl.innerHTML = `医院：${doctor.hospital} | 科室：${doctor.department}`;
                }
                
                // 更新页面标题
                document.title = `${doctor.name} - 医生详情 - BJTU`;
                
                // 更新评价内容
                const reviewContainer = document.querySelector('.review-card:nth-child(2)').parentElement;
                // 清空现有评价（保留模块标题）
                const titleElement = reviewContainer.querySelector('.module-title');
                reviewContainer.innerHTML = '';
                
                // 添加模块标题
                titleElement.textContent = `患者评价 (${doctor.reviews.length})`;
                reviewContainer.appendChild(titleElement);
                
                // 添加评价内容
                doctor.reviews.forEach(review => {
                    const reviewCard = document.createElement('div');
                    reviewCard.className = 'review-card';
                    reviewCard.innerHTML = `
                        <div class="review-header">
                            <div class="reviewer-info">患者：${review.name}</div>
                            <div class="review-time">${review.date}</div>
                        </div>
                        <div class="review-content">
                            ${review.content}
                        </div>
                    `;
                    reviewContainer.appendChild(reviewCard);
                });
            } catch (error) {
                console.error('更新医生信息时出错:', error);
            }
        }
        
        // 页面加载时执行
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面加载完成，开始处理医生信息');
            
            // 获取URL中的医生信息
            const doctorParam = getDoctorFromUrl();
            
            // 查找对应的医生信息
            const doctor = findDoctorByNameOrId(doctorParam);
            
            // 更新页面上的医生信息
            updateDoctorInfo(doctor);
            
            // 额外检查 - 直接修改页面上的医生名称显示，确保视觉上有变化
            setTimeout(() => {
                const nameElement = document.querySelector('.doctor-name');
                if (nameElement && nameElement.textContent !== doctor.name) {
                    console.log('强制更新医生名称:', doctor.name);
                    nameElement.textContent = doctor.name;
                }
            }, 500);
            
            // 生成相关医生推荐
            const recommendedContainer = document.getElementById('recommended-doctors');
            const otherDoctors = doctors.filter(doc => doc.id !== doctor.id);
            
            otherDoctors.forEach(doc => {
                const doctorItem = document.createElement('div');
                doctorItem.className = 'hover-effect transition-all';
                doctorItem.style.display = 'flex';
                doctorItem.style.alignItems = 'center';
                doctorItem.style.marginBottom = '15px';
                doctorItem.style.cursor = 'pointer';
                
                doctorItem.innerHTML = `
                    <img src="${doc.photo}" alt="${doc.name}" style="width: 50px; height: 50px; border-radius: 4px; margin-right: 10px;">
                    <div>
                        <div style="font-weight: bold; font-size: 14px;">${doc.name} - ${doc.title}</div>
                        <div style="font-size: 12px; color: #666;">${doc.department}</div>
                    </div>
                `;
                
                // 添加点击事件
                doctorItem.addEventListener('click', function() {
                    window.location.href = `doctor.html?id=${doc.id}`;
                });
                
                recommendedContainer.appendChild(doctorItem);
            });
        });
    </script>
</body>
</html>